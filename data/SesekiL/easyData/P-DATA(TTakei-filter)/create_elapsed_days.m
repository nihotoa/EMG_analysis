%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%{
[function]
参照する日付からの各実験日の経過日数をリストにして返す

[procedure]
pre:calcXcorr.m
post: plotXcorr.m
%}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
clear;
%% set param
reference_day_type = 'surgery';  % 'surgery' / 'post1'
prefix_added_num = 20;

days = [...%pre-surgery
        200117;...
        200119;...
        200120;...
        200210;...%post surgery
        200212;...
        200213;...
        200214;...
        200217;...
        200218;...
        200219;...
        200220;...
        200221;...
        200226;...
        200303;...
        200304;...
        200305;...
        200306;...
        200309;...
        200310;...
        200316;...
        200317;...
        200318;...
        200319;...
        200323;...
        200324;...
        200325;...
        200326;...
        200330;...
 ];


%% code section
switch reference_day_type
    case 'surgery'
        zero_criterion_day = trans_calrender(20200121);
    case 'post1'
        zero_criterion_day = trans_calrender(20200210);
end

elapsed_days_list = zeros(length(days), 1);
real_day_list = zeros(length(days), 1);
for ii = 1:length(days)
    day_part = days(ii);
    ref_day = str2double([num2str(prefix_added_num) num2str(day_part)]);
    real_day_list(ii) = ref_day;
    elapsed_day = CountElapsedDate(ref_day, zero_criterion_day);
    elapsed_day = caldays(elapsed_day);
    elapsed_days_list(ii) = elapsed_day;
end
combined_data_list = [real_day_list';elapsed_days_list'];
%% save_data
elapsed_days_save_fold_path = fullfile(pwd, 'Elapsed_Days_Data');
if not(exist(elapsed_days_save_fold_path))
    mkdir(elapsed_days_save_fold_path);
end
save(fullfile(elapsed_days_save_fold_path, ['elapsed_days_list(' num2str(length(days)) 'days).mat']), 'elapsed_days_list')

combined_data_save_fold_path = fullfile(pwd, 'Combined_Data');
if not(exist(combined_data_save_fold_path))
    mkdir(combined_data_save_fold_path);
end
save(fullfile(combined_data_save_fold_path, ['Combined_data_list(' num2str(length(days)) 'days_criterion=' reference_day_type '-day).mat']), 'combined_data_list')