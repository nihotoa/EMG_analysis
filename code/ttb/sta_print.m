function sta_print
% rootpath    = 'L:\tkitom\data\tcohsurvey\080619_EndHold';
% rootpath    = 'L:\tkitom\data\tcohsurvey\080619_GripOn';
% rootpath    = 'L:\tkitom\data\tcohsurvey\080619_PreGripOn';
warning('off')
rootpath    = fullfile(datapath);
TOI         = [-1.024 3.072];

Expnames    = {'EitoC01201';...
'EitoC01202';...
'EitoC01203';...
'EitoC01204';...
'EitoC01205';...
'EitoC01206';...
'EitoC01207';...
'EitoC01301';...
'EitoC01302';...
'EitoC01303';...
'EitoC01304';...
'EitoC01401';...
'EitoC01501';...
'EitoC01502';...
'EitoC01503';...
'EitoC01505';...
'EitoC01506';...
'EitoC01507';...
'EitoC01601';...
'EitoC01602';...
'EitoC01603';...
'EitoC01604';...
'EitoC01605';...
'EitoC01606';...
'EitoC01701';...
'EitoC01702';...
'EitoC01703';...
'EitoC01704';...
'EitoC01705';...
'EitoC01801';...
'EitoC01802';...
'EitoC01803';...
'EitoC01804';...
'EitoC01805';...
'EitoC01806';...
'EitoC01807';...
'EitoC01901';...
'EitoC01902';...
'EitoC02001';...
'EitoC02002';...
'EitoC02003';...
'EitoC02101';...
'EitoC02104';...
'EitoC02201';...
'EitoC02202';...
'EitoC02203';...
'EitoC02204';...
'EitoC02205';...
'EitoC02206';...
'EitoC03301';...
'EitoC03302';...
'EitoC03303';...
'EitoC03304';...
'EitoC03305';...
'EitoC03306';...
'EitoC03307';...
'EitoC03308';...
'EitoC03309';...
'EitoC03310';...
'EitoC03402';...
'EitoC03403';...
'EitoC03404';...
'EitoC03405';...
'EitoC03501';...
'EitoC03502';...
'EitoC03503';...
'EitoC03504';...
'EitoC03505';...
'EitoC03506';...
'EitoC03507';...
'EitoC03508';...
'EitoC03509';...
'EitoC03510';...
'EitoC03511';...
'EitoC03512';...
'EitoC03513';...
'EitoC03601';...
'EitoC03602';...
'EitoC03603';...
'EitoC03604';...
'EitoC03605';...
'EitoC03606';...
'EitoC03701';...
'EitoC03702';...
'EitoC03703';...
'EitoC03704';...
'EitoC03705';...
'EitoC03706';...
'EitoC03801';...
'EitoC03802';...
'EitoC03803';...
'EitoC03804';...
'EitoC03805';...
'EitoC03806';...
'EitoC03807';...
'EitoC03808';...
'EitoC03809';...
'EitoC03810';...
'EitoC03811';...
'EitoC03812';...
'EitoC03813';...
'EitoC03814';...
'EitoC03815';...
'EitoC03816';...
'EitoC03817';...
'EitoC03901';...
'EitoC03902';...
'EitoC03903';...
'EitoC03904';...
'EitoC04001';...
'EitoC04002';...
'EitoC04003';...
'EitoC04004';...
'EitoC04005';...
'EitoC04006';...
'EitoC04101';...
'EitoC04102';...
'EitoC04103';...
'EitoC04104';...
'EitoC04105';...
'EitoC04106';...
'EitoC04107';...
'EitoC04108';...
'EitoC04109';...
'EitoC04110';...
'EitoC04111';...
'EitoC04112';...
'EitoC04113';...
'EitoC04201';...
'EitoC04202';...
'EitoC04203';...
'EitoC04204';...
'EitoC04205';...
'EitoC04206';...
'EitoC04207';...
'EitoC04301';...
'EitoC04302';...
'EitoC04304';...
'EitoC04305';...
'EitoC04306';...
'EitoC04307';...
'EitoC04308';...
'EitoC04309';...
'EitoC04310';...
'EitoC04311';...
'EitoC04312';...
'EitoC04401';...
'EitoC04402';...
'EitoC04403';...
'EitoC04404';...
'EitoC04405';...
'EitoC04406';...
'EitoC04407';...
'EitoC04408';...
'EitoC04409';...
'EitoC04410';...
'EitoC04411';...
'EitoC04412';...
'EitoC04501';...
'EitoC04502';...
'EitoC04504';...
'EitoC04505';...
'EitoC04506';...
'EitoC04507';...
'EitoC04508';...
'EitoC04601';...
'EitoC04602';...
'EitoC04603';...
'EitoC04604';...
'EitoC04701';...
'EitoC04702';...
'EitoC04703';...
'EitoC04704';...
'EitoC04705';...
'EitoC04706';...
'EitoC04707';...
'EitoC04801';...
'EitoC04802';...
'EitoC04803';...
'EitoC04804';...
'EitoC04805';...
'EitoC04806';...
'EitoC04807';...
'EitoC04808';...
'EitoC04901';...
'EitoC04902';...
'EitoC04903';...
'EitoC04904';...
'EitoC04905';...
'EitoC04906';...
'EitoC04907';...
'EitoC04908';...
'EitoC04909';...
'EitoC04910';...
'EitoC04911';...
'EitoC04912';...
'EitoC05001';...
'EitoC05002';...
'EitoC05003';...
'EitoC05004';...
'EitoC05005';...
'EitoC05006';...
'EitoC05007';...
'EitoC05008';...
'EitoC05009';...
'EitoC05010';...
'EitoC05011';...
'EitoC05012';...
'EitoC05013';...
'EitoC05014';...
'EitoC05015';...
'EitoC05101';...
'EitoC05102';...
'EitoC05103';...
'EitoC05201';...
'EitoC05202';...
'EitoC05203';...
'EitoC05204';...
'EitoC05205';...
'EitoC05206';...
'EitoC05207';...
'EitoC05208';...
'EitoC05209';...
'EitoC05210';...
'EitoC05211';...
'EitoC05212';...
'EitoC05213';...
'EitoC05214';...
'EitoC05215';...
'EitoC05301';...
'EitoC05302';...
'EitoC05303';...
'EitoC05304';...
'EitoC05305';...
'EitoC05306';...
'EitoC05307';...
'EitoC05308';...
'EitoC05309';...
'EitoC05311';...
'EitoC05312';...
'EitoC05313';...
'EitoC05314';...
'EitoC05401';...
'EitoC05402';...
'EitoC05403';...
'EitoC05404';...
'EitoC05405';...
'EitoC05406';...
'EitoC05407';...
'EitoC05408';...
'EitoC05409';...
'EitoC05410';...
'EitoC05411';...
'EitoC05412'};''
% Expnames    = {'EitoC01201'};


files   ={'PSTH (Grip Onset (svwostim), tSpike).mat','STA (tSpike, Unit 1).mat','STA (Grip Onset (svwostim), smoothed Index Torque(N)).mat','STA (Grip Onset (svwostim), smoothed Thumb Torque(N)).mat';...
    'STA (Grip Onset (svwostim), lFDIl(uV)','STA (tSpike, lFDIl(uV)).mat','STA (Grip Onset (svwostim), lADPl(uV)).mat','STA (Grip Onset (svwostim), lADPl(uV)).mat';...
    'STA (Grip Onset (svwostim), l3DIl(uV)).mat','STA (Grip Onset (svwostim), l3DIl(uV)).mat','STA (Grip Onset (svwostim), l2DIl(uV)).mat','STA (Grip Onset (svwostim), l2DIl(uV)).mat';...
    'STA (Grip Onset (svwostim), lAbPBl(uV)).mat','STA (Grip Onset (svwostim), lAbPBl(uV)).mat','STA (Grip Onset (svwostim), lBRDl(uV)).mat','STA (Grip Onset (svwostim), lBRDl(uV)).mat';...
    'STA (Grip Onset (svwostim), lED23l(uV)).mat','STA (Grip Onset (svwostim), lED23l(uV)).mat','STA (Grip Onset (svwostim), lECRl(uV)).mat','STA (Grip Onset (svwostim), lECRl(uV)).mat';...
    'STA (Grip Onset (svwostim), lEDCl(uV)).mat','STA (Grip Onset (svwostim), lEDCl(uV)).mat','STA (Grip Onset (svwostim), lECUl(uV)).mat','STA (Grip Onset (svwostim), lECUl(uV)).mat';...
    'STA (Grip Onset (svwostim), lAbPLl(uV)).mat','STA (Grip Onset (svwostim), lAbPLl(uV)).mat','STA (Grip Onset (svwostim), l4DIl(uV)).mat','STA (Grip Onset (svwostim), l4DIl(uV)).mat';...
    'STA (Grip Onset (svwostim), lAbDMl(uV)).mat','STA (Grip Onset (svwostim), lAbDMl(uV)).mat','STA (Grip Onset (svwostim), lFCRl(uV)).mat','STA (Grip Onset (svwostim), lFCRl(uV)).mat';...
    'STA (Grip Onset (svwostim), lFDSl(uV)).mat','STA (Grip Onset (svwostim), lFDSl(uV)).mat','STA (Grip Onset (svwostim), lFDPrl(uV)).mat','STA (Grip Onset (svwostim), lFDPrl(uV)).mat';...
    'STA (Grip Onset (svwostim), lFDPul(uV)).mat','STA (Grip Onset (svwostim), lFDPul(uV)).mat','STA (Grip Onset (svwostim), lFCUl(uV)).mat','STA (Grip Onset (svwostim), lFCUl(uV)).mat';...
    'STA (Grip Onset (svwostim), lPLl(uV)).mat','STA (Grip Onset (svwostim), lPLl(uV)).mat','STA (Grip Onset (svwostim), lBicepsl(uV)).mat','STA (Grip Onset (svwostim), lBicepsl(uV)).mat'};
%     'STA (Grip Onset (svwostim), lTricepsl(uV).mat',    'STA (Grip Onset (svwostim), lTricepsl(uV).mat'

[nrow,ncol] = size(files);

% 
% files       ={'Grip Onset (svwostim)','smoothed Index Torque(N)';...
%     'Grip Onset (svwostim)','smoothed Thumb Torque(N)';...    'Grip Onset (svwostim)','Unit 1(uV)';...
%     'Grip Onset (svwostim)','smoothed index(mm)';
%     'Grip Onset (svwostim)','lFDIl(uV)';...
%     'Grip Onset (svwostim)','lADPl(uV)';...
%     'Grip Onset (svwostim)','l3DIl(uV)';...
%     'Grip Onset (svwostim)','l2DIl(uV)';...
%     'Grip Onset (svwostim)','lAbPBl(uV)';...
%     'Grip Onset (svwostim)','lBRDl(uV)';...
%     'Grip Onset (svwostim)','lED23l(uV)';...
%     'Grip Onset (svwostim)','lECRl(uV)';...
%     'Grip Onset (svwostim)','lEDCl(uV)';...
%     'Grip Onset (svwostim)','lECUl(uV)';...
%     'Grip Onset (svwostim)','lAbPLl(uV)';...
%     'Grip Onset (svwostim)','l4DIl(uV)';...
%     'Grip Onset (svwostim)','lAbDMl(uV)';...
%     'Grip Onset (svwostim)','lFCRl(uV)';...
%     'Grip Onset (svwostim)','lFDSl(uV)';...
%     'Grip Onset (svwostim)','lFDPrl(uV)';...
%     'Grip Onset (svwostim)','lFDPul(uV)';...
%     'Grip Onset (svwostim)','lFCUl(uV)';...
%     'Grip Onset (svwostim)','lPLl(uV)';...
%     'Grip Onset (svwostim)','lBicepsl(uV)';...
%     'Grip Onset (svwostim)','lTricepsl(uV)'};


nExp    = length(Expnames);
nfiles    = length(files);
nerror  = 0;

for iExp    = 1:nExp
    try
    Expname     = Expnames{iExp};
    
%     fig=figure;
fig = open('A4.fig');
set(fig,'Name',Expname,...
        'Numbertitle','Off',...
        'FileName',Expname)
    
    for ifiles   = 1:nfiles
        Ref     = files{ifiles,1};
        Tar     = files{ifiles,2};
        file    = ['STA (',Ref,', ',Tar,').mat'];
        filename    = fullfile(rootpath,Expname,file);
        s   = load(filename);
        YData   = s.YData;
        TrialData   = s.TrialData;
        XData   = s.XData;
        nTrials  = size(s.TrialData,1);
        
        h   = subplot(floor((nfiles+1)/2),2,ifiles);
        plot(XData,YData,'-k')
        set(h,'XLim',TOI);

        if(ifiles==1)
            title({Expname;Tar})
        else

            title(Tar)
        end
        
       
    end
%     print(fig)
    saveas(fig,Expname,'jpg')
    close(fig)
    
    catch
        Expname     = Expnames{iExp};
        disp(['error occured in',Expname])
        nerror  = nerror+1;
        a(nerror)   = lasterror;
    end
end
warning('on')

